(module
  (import "c4wa" "printf" (func $printf (param i32) (param i32)))
  (memory (export "memory") 1)
  (data (i32.const 1024) "A = %.6f, %.6f, %.6f\5Cn\00B = %.6f, %.6f, %.6f\5Cn\00A . B = %.6f\5Cn\00")
  (func $dot (param $A i32) (param $B i32) (result f32)
    (return (f32.add (f32.add (f32.mul (f32.load (i32.add (get_local $A) (i32.const 1))) (f32.load (i32.add (get_local $B) (i32.const 1)))) (f32.mul (f32.load (i32.add (get_local $A) (i32.const 5))) (f32.load (i32.add (get_local $B) (i32.const 5))))) (f32.mul (f32.load (i32.add (get_local $A) (i32.const 9))) (f32.load (i32.add (get_local $B) (i32.const 9)))))))
  (func $main (export "main") (result i32)
    (local $A i32)
    (local $B i32)
    (local $C i32)
    (local $M i32)
    (set_local $M (i32.const 13))
    (set_local $A (i32.const 2048))
    (set_local $B (i32.add (get_local $M) (i32.const 2048)))
    (set_local $B (i32.add (i32.mul (i32.const 2) (get_local $M)) (i32.const 2048)))
    (f32.store (i32.add (get_local $A) (i32.const 1)) (f32.const 1.0))
    (f32.store (i32.add (get_local $A) (i32.const 5)) (f32.const -2.0))
    (f32.store (i32.add (get_local $A) (i32.const 9)) (f32.const 3.0))
    (f32.store (i32.add (get_local $B) (i32.const 1)) (f32.const 4.0))
    (f32.store (i32.add (get_local $B) (i32.const 5)) (f32.const 5.0))
    (f32.store (i32.add (get_local $B) (i32.const 9)) (f32.const -6.0))
    (i64.store (i32.const 0) (i64.const 1024))
    (f64.store (i32.const 8) (f64.promote_f32 (f32.load (i32.add (get_local $A) (i32.const 1)))))
    (f64.store (i32.const 16) (f64.promote_f32 (f32.load (i32.add (get_local $A) (i32.const 5)))))
    (f64.store (i32.const 24) (f64.promote_f32 (f32.load (i32.add (get_local $A) (i32.const 9)))))
    (call $printf (i32.const 0) (i32.const 4))
    (i64.store (i32.const 0) (i64.const 1047))
    (f64.store (i32.const 8) (f64.promote_f32 (f32.load (i32.add (get_local $B) (i32.const 1)))))
    (f64.store (i32.const 16) (f64.promote_f32 (f32.load (i32.add (get_local $B) (i32.const 5)))))
    (f64.store (i32.const 24) (f64.promote_f32 (f32.load (i32.add (get_local $B) (i32.const 9)))))
    (call $printf (i32.const 0) (i32.const 4))
    (i64.store (i32.const 0) (i64.const 1070))
    (f64.store (i32.const 8) (f64.promote_f32 (call $dot (get_local $A) (get_local $B))))
    (call $printf (i32.const 0) (i32.const 2))
    (return (i32.const 0))))
